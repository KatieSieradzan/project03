data_directory = data_directory = '/badc/cmip6/data/CMIP6/CMIP/MOHC/UKESM1-0-LL/'
!ls {data_directory}

from itertools import chain
from glob import glob

import matplotlib.pyplot as plt
import xarray as xr

# Set some plotting defaults
plt.rcParams['figure.figsize'] = (10, 6)
plt.rcParams['figure.dpi'] = 100

dataset = xr.open_mfdataset(data_directory + 'piControl/r1i1p1f2/Omon/epc100/gn/latest/epc100_Omon_UKESM1-0-LL_piControl_r1i1p1f2_gn_196001-204912.nc')

epc = dataset['epc100']
epc.compute()

select_an_area_latitude = epc.sel(j = slice(20,80))
select_an_area_longitude = select_an_area_latitude.sel(i = slice(20,80))
area_average = select_an_area_longitude.mean(['j','i'])
area_average.compute()

mean_annual_epc = area_average.resample(time="1Y")
mean_annual_epc_final = mean_annual_epc.mean()
mean_annual_epc_final.plot()
